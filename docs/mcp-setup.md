# MCP Server Setup

## Claude Desktop Configuration

Add to your Claude Desktop configuration file:

### macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
### Windows: `%APPDATA%\Claude\claude_desktop_config.json`

```json
{
  "mcpServers": {
    "semantic-profiler": {
      "command": "php",
      "args": [
        "vendor/koriym/semantic-logger/bin/server.php",
        "/tmp"
      ]
    }
  }
}
```

## Project-specific Configuration

Create `.mcp.json` in your project root:

```json
{
  "mcpServers": {
    "semantic-profiler": {
      "command": "php",
      "args": [
        "vendor/koriym/semantic-logger/bin/server.php",
        "/path/to/your/log/directory"
      ]
    }
  }
}
```

## Usage with Claude Code

Once configured, you can use these MCP tools:

### `getSemanticProfile`
Retrieve the latest semantic performance profile with AI-optimized analysis prompts.

### `semanticAnalyze`
Execute a PHP script with semantic profiling enabled, then automatically generate AI-powered performance insights.

**Example:**
```
Use semanticAnalyze to run my-script.php and analyze performance
```

## Log Directory Setup

The MCP server expects semantic log files in the specified directory with the pattern:
- `semantic-dev-*.json` - Structured log data
- `semantic-dev-*-prompt.md` - AI analysis prompts

These are automatically generated by `DevLogger` during development.

## Troubleshooting

### "No semantic log files found"
- Ensure your application uses `DevLogger` to generate semantic logs
- Check that the log directory path is correct
- Verify semantic log files exist with the expected naming pattern

### "Script not found"
- Use absolute paths for script execution
- Ensure the PHP script exists and is executable

### Extension loading issues
- Modify `bin/php-dev.ini` to match your PHP extension setup
- Comment out extensions that aren't installed on your system